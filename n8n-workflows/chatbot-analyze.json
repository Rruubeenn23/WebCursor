{
  "name": "Chatbot Analyze Nutrition",
  "nodes": [
    {
      "id": "webhook",
      "name": "Incoming Prompt",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [100, 100],
      "parameters": {
        "httpMethod": "POST",
        "path": "chatbot-analyze",
        "responseMode": "onReceived",
        "responseData": "allEntries"
      }
    },
    {
      "id": "fetch-data",
      "name": "Fetch Weekly Summary",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [320, 100],
      "parameters": {
        "method": "GET",
        "url": "={{ $env.APP_URL + '/api/summary/weekly' }}",
        "options": { "retryOnFail": true, "maxRetries": 3 }
      }
    },
    {
      "id": "respond",
      "name": "Respond",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [540, 100],
      "parameters": {
        "responseBody": "={ \"message\": \"Summary fetched\", \"data\": $json }"
      }
    }
  ],
  "connections": { "fetch-data": { "main": [[{ "node": "Respond", "type": "main", "index": 0 }]] } }
}
