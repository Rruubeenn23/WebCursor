{
  "name": "Meal Reminders",
  "nodes": [
    {
      "id": "cron",
      "name": "Every Day 08:00",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [100, 100],
      "parameters": {
        "triggerTimes": { "item": [{ "hour": 8, "minute": 0 }] }
      }
    },
    {
      "id": "fetch-meals",
      "name": "Fetch Today Meals",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 1,
      "position": [320, 100],
      "parameters": {
        "method": "GET",
        "url": "={{ $env.APP_URL + '/api/day-plan?date=' + $now.format('YYYY-MM-DD') }}",
        "options": { "retryOnFail": true, "maxRetries": 3 }
      }
    },
    {
      "id": "email",
      "name": "Email Summary",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2,
      "position": [540, 100],
      "parameters": {
        "fromEmail": "={{$env.EMAIL_FROM}}",
        "toEmail": "you@example.com",
        "subject": "Today's Meals",
        "text": "Your meals are ready in the app."
      },
      "credentials": {
        "smtp": {
          "user": "={{$env.EMAIL_SMTP_USER}}",
          "password": "={{$env.EMAIL_SMTP_PASS}}",
          "host": "={{$env.EMAIL_SMTP_HOST}}",
          "port": "={{$env.EMAIL_SMTP_PORT}}"
        }
      }
    }
  ],
  "connections": { "fetch-meals": { "main": [[{ "node": "Email Summary", "type": "main", "index": 0 }]] } }
}
